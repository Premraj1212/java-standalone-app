
  name: Expense Tracker Application Test

  on:
    push:
      branches: [ main ]

    workflow_dispatch:


  jobs:
    build:
      runs-on: ubuntu-latest

      steps:
        - name: Checkout code
          uses: actions/checkout@v4

        - name: Set up JDK 17
          uses: actions/setup-java@v4
          with:
            java-version: '17'
            distribution: 'temurin'
            cache: maven


        - name: Run tests
          run: mvn clean test surefire-report:report

        - name: Generate Test Report
          uses: dorny/test-reporter@v1
          if: always()
          with:
            name: Maven Tests
            path: target/site/surefire-report.html
            reporter: java-junit
            fail-on-error: true